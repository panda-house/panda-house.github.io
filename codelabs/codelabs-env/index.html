
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>codelabs环境搭建</title>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://storage.googleapis.com/codelab-elements/codelab-elements.css">
  <style>
    .success {
      color: #1e8e3e;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <google-codelab-analytics gaid="UA-49880327-14"></google-codelab-analytics>
  <google-codelab codelab-gaid=""
                  id="codelabs-env"
                  title="codelabs环境搭建"
                  environment="web"
                  feedback-link="www.baidu.com">
    
      <google-codelab-step label="Codelabs简介" duration="2">
        <ul>
<li>Codelabs提供了一个指导、教程、实践的编码体验 ，特别喜欢它按步骤的交互方式，如下图所示<br></li>
</ul>
<p class="image-container"><img alt="codelabs" src="img/cb5a7ed29801d0a4.jpg"></p>


      </google-codelab-step>
    
      <google-codelab-step label="服务器准备" duration="5">
        <h2 is-upgraded>操作系统系统</h2>
<ul>
<li>操作系统： centos7.9</li>
<li>需要访问互联网  <h2 is-upgraded>服务器配置</h2>
</li>
<li>cpu: 2c</li>
<li>memory: 4g</li>
<li>disk: 50G  <h2 is-upgraded>需要安装环境</h2>
</li>
<li>go1.15.6</li>
<li>nodejs-12.12.0</li>
<li>git 命令</li>
</ul>


      </google-codelab-step>
    
      <google-codelab-step label="安装NodeJs环境" duration="3">
        <p><br> 安装版本为NodeJs-12.12.0</p>
<h2 is-upgraded>下载安装</h2>
<ul>
<li>创建安装目录<br><br><code>mkdir -p /opt/softs<br></code></li>
<li>安装包下载<br><br><code>cd /opt/softs<br>wget https://nodejs.org/download/release/v12.12.0/node-v12.12.0-linux-x64.tar.gz<br></code></li>
<li>解压  <pre><code>cd /opt/softs
tar -zxvf node-v12.12.0-linux-x64.tar.gz
</code></pre>
<h2 is-upgraded>环境配置</h2>
</li>
<li>环境变量配置  <pre><code>vim /etc/profile
添加如下内容
#nodejs
export PATH=/opt/softs/node-v12.12.0-linux-x64/bin:${PATH}
</code></pre>
</li>
<li>环境变量生效  <pre><code>source /etc/profile
</code></pre>
</li>
<li>验证安装成功  <pre><code>[root@vms88 site]# node -v 
v12.12.0
</code></pre>
<h2 is-upgraded>gulp打包工具安装</h2>
</li>
<li>设置淘宝源  <pre><code>npm config set registry http://registry.npm.taobao.org
npm config get registry
</code></pre>
</li>
<li>安装gulp  <pre><code>npm install -g  gulp
npm install  gulp
</code></pre>
</li>
</ul>


      </google-codelab-step>
    
      <google-codelab-step label="安装配置go语言环境" duration="2">
        <ol type="1">
<li>下载解压<br> 版本: 1.15.6  <pre><code>cd /opt/softs
wget https://dl.google.com/go/go1.15.6.linux-amd64.tar.gz 
tar -zxvf go1.15.6.linux-amd64.tar.gz 
mv go go1.15.6
</code></pre>
</li>
<li>配置环境变量  <pre><code>vim /etc/profile
#go
export GOPATH=/home/go/workspace
export GOROOT=/opt/softs/go1.15.6
export PATH=$GOROOT/bin:$PATH
export PATH=$GOPATH/bin:$PATH
</code></pre>
</li>
<li>验证  <pre><code>[root@vms88 ~]# go version
go version go1.15.6 linux/amd64
</code></pre>
</li>
</ol>


      </google-codelab-step>
    
      <google-codelab-step label="claat工具安装" duration="0">
        <pre><code>go get github.com/googlecodelabs/tools/claat

</code></pre>
<p>这个地方如果出现网络问题，可以配置一个全局代理用于科学上网</p>
<p>代理配置参考如下</p>
<pre><code>    vim /etc/profile
    #上网代理
    export http_proxy=http://192.168.26.1:1080
    export https_proxy=http://192.168.26.1:1080

</code></pre>


      </google-codelab-step>
    
      <google-codelab-step label="创建第一个codelab项目" duration="2">
        <ul>
<li>克隆代码<br><br><code>git  clone https://github.com/googlecodelabs/tools<br></code></li>
</ul>
<p>在刚clone 代码site 下新建一个codelabs目录（在那件文件夹都可以，为了方便下面操作就这样建立文件夹了），在codelabs在创建一个assets 用于存放图片等资源<br> 在codelabs 添加一个first_codelab.md文件，内容如下</p>
<pre><code>        summary: 测试，第一个codelab
        id: first_codelab
        categories: Android
        tags: android
        status: Published 
        authors: kk
        Feedback Link: https://github.com/wkk-knight/
        
        &lt;!-- 标题  用一级--&gt;
        # 第一个codelab 
        
        &lt;!------------------- 步骤1 步骤用二级标签 ---------------&gt;
        ## 开始学习
        &lt;!-- 这一步估计需要的时间--&gt;
        Duration: 1 
        &lt;!-- 第一步的内容 start  --&gt;
        ### 啦啦啦
        测试
        写你想写的内容 
        用md语法写就行
        &lt;!-- 第一步的内容 end  --&gt;
        
        
        &lt;!-------------------- 步骤 2------------------------&gt;
        ## 学会了吗？
        Duration: 2
        &lt;!-- 第二步的内容 start  --&gt;
        学会了吗？
        来点代码
        ​```kotlin
        fun main() {
            println(&#34;hello world&#34;)
        }
        &lt;!-- 第二步的内容 end  --&gt;
        
        &lt;!-------------------- 步骤 3------------------------&gt;
        
        ## 学废了吗？
        
        Duration: 3
        &lt;!-- 第三步的内容 start  --&gt;
        学废了吗？
        再来点代码
        
        ​```kotlin
        fun main() {
            println(&#34;hello world&#34;)
        }
        ​```
        
        &lt;!-- 第三步的内容 end  --&gt;
        
        &lt;!-------------------- 步骤 3------------------------&gt;
        
        ## 结束
        
        Duration: 1
        
        

</code></pre>
<aside class="warning"><p>如果在Windows系统写这个md 文件，使用的编辑器一定要用unix 的换行格式 ，否则你会发现输出的格式会有异常。这个换行符在vs code 等编辑器可以修改的。<br></p>
</aside>
<p>根据上面的md文件生成对应html文件，执行下面命令</p>
<p>claat export first_codelab.md</p>
<p>执行结束，看到ok就说明执行成功了<br><img alt="a1" src="img/a3cd0152d736a01c.png"></p>
<p>执行成功后会发现对应的html文件</p>
<p class="image-container"><img alt="a2" src="img/6f1306bcd47d444f.jpg"></p>
<p>把index.html打开就可以看到效果了</p>


      </google-codelab-step>
    
      <google-codelab-step label="列表展示" duration="3">
        <ul>
<li>Codelab 做好了，我还要把这些用列表的形式展示 https://codelabs.developers.google.com/<br></li>
</ul>
<p class="image-container"><img alt="list" src="img/df2fc0304d737de4.jpg"></p>
<p>这个界面的代码也是引用的，就在我们刚才下载的代码site目录下，安装site目录下的ERADME.md 我们来运行一下。</p>
<pre><code>    ## 进入site目录
    cd site
    ##安装依赖
    npm install
    ## 启动服务
    gulp serve
</code></pre>
<aside class="special"><p>如果npm install 报错权限不够，可以使用该命令运行 npm install –unsafe-perm</p>
</aside>
<p>服务启动后 打开 http://localhost:8000 就可以看到效果了</p>


      </google-codelab-step>
    
      <google-codelab-step label="关联CodeLab" duration="0">
        <p>把我们刚才写的codelab 显示在列表中，我们使用下面命令部署列表</p>
<pre><code>#启动的时候指定codelabs所在的目录
gulp serve --codelabs-dir=codelabs
</code></pre>
<p class="image-container"><img alt="firstlab" src="img/35d62c74d0362ec3.png"></p>
<h2 is-upgraded>添加类别</h2>
<p>在列表的又上角有个下拉菜单，可以选择类别，默认有个Visual Studio Live 版本，我们也可以自己添加一个 比如Android<br><img alt="cat" src="img/61fae06edd7f4559.png"></p>
<p>在site/app/views 下面创建类别文件夹<br><img alt="android" src="img/a3e4eea6d6bed078.png"></p>
<p>文件夹需要一个logo图片（svg 或者125x125的png图片）还有一个view.json的文件 用来描述页面内容 view.json</p>
<pre><code>    {
      &#34;title&#34;: &#34;Android&#34;,
      &#34;description&#34;: &#34;这是Android 板块&#34;,
      &#34;logoUrl&#34;: &#34;/android/Android_logo.png&#34;,
      &#34;tags&#34;: [&#34;android&#34;]
    }
</code></pre>
<aside class="special"><p>title：类别的标题，description 类别的描述，logoUrl：列表的logo地址，tags 是和codelab 文件上tags 设置的tags是有关联的，相同的话，就会在这个类别显示这个codelab<br></p>
</aside>
<p class="image-container"><img alt="title" src="img/26e8716108d2387d.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="部署服务" duration="0">
        <p>在上面执行完 <code>gulp serve --codelabs-dir=codelabs</code> 命令后，就生成一个build文件，这个文件中就是静态的html 文件，可以部署到github pages 上或者自己服务器<br> 还有一种打包方式是</p>
<pre><code>    #打包并启动服务
    gulp serve:dist  --codelabs-dir=codelabs
    #直接打包，不启动服务
    gulp dist  --codelabs-dir=codelabs
</code></pre>
<p>这种输入的静态文件在dist中，代码会压缩体积更小<br> 还可以直接使用nginx代理dist目录<br> 补充<br> 可以将codelabs配置一个systemd服务,这样生产好的网页就可以直接访问了<br> 创建一个启动脚本</p>
<pre><code>    cd /opt/softs/codelabs/tools/site
    vim startup.sh
    #!/bin/bash
    export PATH=/opt/softs/node-v12.12.0-linux-x64/bin:${PATH}
    cd /opt/softs/codelabs/tools/site
    gulp serve --codelabs-dir=codelabs &amp;
</code></pre>
<p>创建一个systemd服务</p>
<p>vim /usr/lib/systemd/system/codelabs.service</p>
<p>内容如下:</p>
<pre><code>    [Unit]
    Description=codelabsservice daemon
    After=syslog.target network.target
    
    [Service]
    Type=forking
    
    Environment=NODEJS_HOME=&#34;/opt/softs/node-v12.12.0-linux-x64&#34;
    ExecStart=/opt/softs/codelabs/tools/site/startup.sh
    SuccessExitStatus=143
    PrivateTmp=true
    
    User=root
    Group=root
    
    [Install]
    WantedBy=multi-user.target

</code></pre>


      </google-codelab-step>
    
  </google-codelab>

  <script src="https://storage.googleapis.com/codelab-elements/native-shim.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/custom-elements.min.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/prettify.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/codelab-elements.js"></script>
  <script src="//support.google.com/inapp/api.js"></script>

</body>
</html>
